var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,h){for(var f=1;f<arguments.length;f++){var n=arguments[f];if(n)for(var e in n)$jscomp.owns(n,e)&&(c[e]=n[e])}return c};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,h,f){c!=Array.prototype&&c!=Object.prototype&&(c[h]=f.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,h,f,n){if(h){f=$jscomp.global;c=c.split(".");for(n=0;n<c.length-1;n++){var e=c[n];e in f||(f[e]={});f=f[e]}c=c[c.length-1];n=f[c];h=h(n);h!=n&&null!=h&&$jscomp.defineProperty(f,c,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.arrayIteratorImpl=function(c){var h=0;return function(){return h<c.length?{done:!1,value:c[h++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(c,h){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function c(f){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+h++,f)}var h=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.iteratorFromArray=function(c,h){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var f=0,n={next:function(){if(f<c.length){var e=f++;return{value:h(e,c[e]),done:!1}}n.next=function(){return{done:!0,value:void 0}};return n.next()}};n[Symbol.iterator]=function(){return n};return n};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
function get_time_diff(c){c=(new Date(c)).getTime();var h=(new Date).getTime();if(isNaN(c))return 1E4;c=h-c;return 0<c?c/1E3:1E4}
(function(c,h){function f(a){return h.getElementById(a)}function n(a,b){a.appendChild(b)}function e(a,b){a.classList.add("comment-"+b)}function m(a,b){null!==a&&a.classList.remove("comment-"+b)}function g(a){return h.createElement(a)}function p(a){null!==a&&a.parentNode.removeChild(a)}function U(a,b){a=a.attributes[b];if(void 0!==a)return a.value}function E(a){if(null!==a){var b=a.cloneNode(!0);if(null!==a.parentNode)return a.parentNode.replaceChild(b,a),b}return a}function q(a,b,c){a.addEventListener("click",
function(){b(c)},!1)}function A(a,b,c){a.addEventListener("change",function(){b(c)},!1)}function r(a,b,c){var l=new XMLHttpRequest;l.open("POST",a,!0);l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.onreadystatechange=function(){if(4==l.readyState&&200==l.status){try{var a=JSON.parse(l.response)}catch(d){Zepto.alert(d)}c(a)}};l.timeout=15E3;l.send(JSON.stringify(b))}function w(a){"function"===typeof a&&a()}function ea(a){a=("; "+h.cookie).split("; "+a+"=");if(2===a.length)return a.pop().split(";").shift()}
function sa(a,b){var c=new Date;c.setTime(c.getTime()+31536E6);c="; expires="+c.toUTCString();h.cookie=a+"="+b+c+"; path=/"}function fa(a){r("/api/user/self",{},function(b){b.success?(b=b.commenter,Y[b.userId]=b,ba=b.userId,P=!0,c.allShow()):x="my"===x?"time":x;w(a)})}function ha(){var a=g("button");q(a,ta);a.id="more";a.classList.add("bp3-button");a.classList.add("bp3-fill");a.classList.add("fill");a.classList.add("pure-button");a.classList.add("text-center");a.innerText=LOAD_MORE_COMMENTS;return a}
function ia(a){r("/api/comment/list",{domain:parent.location.host,path:IDENTIFIER,rootId:ROOT_ID,postId:POST_ID,offset:V,order:x},function(b){b.success?(ca=b.isModerator,ja=b.attributes.isLocked,B=b.attributes.stickyPostId,I=Object.assign({},b.comments),Y=Object.assign({},b.users),ka=Object.assign({},b.votes),V=b.offset,w(a)):Zepto.alert(b.message)})}function la(a){return function(){a.style.height="";a.style.height=Math.min(Math.max(a.scrollHeight,75),400)+"px"}}function ma(a){var b=g("div"),l=g("div"),
f=g("textarea"),k=g("div"),d=g("input"),J=g("label"),h=g("button");b.id="textarea-super-container-"+a;l.id="textarea-container-"+a;f.id="textarea-"+a;d.id="attachment-"+a;J.id="attachment-button-"+a;h.id="submit-button-"+a;l.classList.add("form");f.classList.add("bp3-input");e(l,"textarea-container");e(b,"button-margin");if(localStorage){var m=localStorage.getItem("textarea-"+a);f.innerHTML=m}d.name="attachment";d.type="file";d.classList.add("hide");d.setAttribute("accept","image/jpeg, image/jpg, image/webp, image/gif, image/png");
e(J,"attachment");J.setAttribute("for","attachment-"+a);J.classList.add("bp3-button");J.classList.add("bp3-minimal");J.classList.add("pure-button");J.innerHTML=CHOOSE_FILE;e(h,"submit-button");h.classList.add("bp3-button");h.classList.add("bp3-minimal");h.classList.add("pure-button");h.classList.add("text-center");e(k,"toolbar");f.setAttribute("placeholder",ADD_A_COMMENT);h.innerText="Post";f.oninput=la(f);P?A(d,na,a):A(d,c.needSignIn);q(h,va,a);k.appendChild(J);k.appendChild(d);k.appendChild(h);
l.appendChild(f);l.appendChild(k);b.appendChild(l);return b}function na(a){var b=f("textarea-"+a),c=b.value,e=f("attachment-"+a),k=f("attachment-button-"+a);a=e.files[0];if(-1==["image/jpeg","image/png","image/jpg","image/webp","image/gif"].indexOf(a.type))Zepto.alert("Error : Incorrect file type");else if(10485760<a.size)Zepto.alert("Error : Exceeded size 10MB");else{k.innerHTML=UPLOADING;k.setAttribute("disabled","disabled");e=new FormData;var d=new XMLHttpRequest;e.append("attachment",a,a.name);
d.open("POST","//sofifa.com/api/attachment?_="+Math.random(),!0);d.withCredentials=!0;d.setRequestHeader("accept","* /*");d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){try{var a=JSON.parse(d.response)}catch(ua){Zepto.alert(ua)}a.success?(b.value=c+(c.length?"\n":"")+a.message+"\n",b.style.height="",b.style.height=Math.min(Math.max(b.scrollHeight,75),400)+"px",b.focus()):Zepto.alert(a.message)}k.innerHTML=CHOOSE_FILE;k.removeAttribute("disabled")};d.timeout=15E3;d.ontimeout=
function(){Zepto.alert("Timed out!!!")};d.send(e)}}function wa(a){var b=f("main-area"),c=g("div"),v=g("div"),k=g("select");v.classList.add("float-right");v.classList.add("half-spacing");k.id="comment-order";e(k,"order");var d=g("option");d.value="time";d.textContent=SORT_BY_NEWEST;k.appendChild(d);d=g("option");d.value="best";d.textContent=SORT_BY_BEST;k.appendChild(d);d=g("option");d.value="my";d.textContent=MY_COMMENTS;k.appendChild(d);k.value=x;A(k,xa);v.prepend(k);b.appendChild(v);c.id="comments-area";
e(c,"comments");c.innerHTML="";v=ma("root");b.appendChild(v);b.appendChild(c);u.appendChild(b);w(a)}function xa(){x=f("comment-order").value;"time"==x&&(V=1E12);sa("commentOrder",x);f("comment-loader").innerHTML='<div id="bp3-spinner" class="bp3-spinner"><div class="bp3-spinner-animation"><svg width="50" height="50" stroke-width="8.00" viewBox="1.00 1.00 98.00 98.00"><path class="bp3-spinner-track" d="M 50,50 m 0,-45 a 45,45 0 1 1 0,90 a 45,45 0 1 1 0,-90"></path><path class="bp3-spinner-head" d="M 50,50 m 0,-45 a 45,45 0 1 1 0,90 a 45,45 0 1 1 0,-90" pathLength="280" stroke-dasharray="280 280" stroke-dashoffset="210"></path></svg></div></div><div id="comment"></div>';
c.main(function(){p(h.getElementById("bp3-spinner"))})}function ya(a,b){a-=b;if(5E3>a)return JUST_NOW;if(6E4>a)return a=Math.round(a/1E3),a+" second"+(1<a?"s":"")+" ago";if(36E5>a)return a=Math.round(a/6E4),a+" minute"+(1<a?"s":"")+" ago";if(864E5>a)return a=Math.round(a/36E5),a+" hour"+(1<a?"s":"")+" ago";if(2592E6>a)return a=Math.round(a/864E5),a+" day"+(1<a?"s":"")+" ago";if(31536E6>a)return a=Math.round(a/2592E6),a+" month"+(1<a?"s":"")+" ago";a=Math.round(a/31536E6);return a+" year"+(1<a?"s":
"")+" ago"}function Q(a){return 0!==a&&1!==a?a+" points":a+" point"}function da(a,b){var l=a[b];if(!l||!l.length)return null;l.sort(function(a,c){return a.postId==ROOT_ID?-Infinity:c.postId==ROOT_ID?Infinity:a.postId===B?-Infinity:c.postId==B?Infinity:"root"==b?"best"==x&&a.score!==c.score?c.score-a.score:a.createdAt>c.createdAt?-1:1:a.createdAt<c.createdAt?-1:1});var f=(new Date).getTime(),k=g("div");l.forEach(function(b){var l=Y[b.userId],d=ka[b.postId],h=g("div"),v=g("div"),m=g("div"),n=g("div"),
r=g("div"),x=g("div"),p=g("div"),w=g("div"),y=g("div"),z=g("div"),t=g("button"),u=g("button"),E=g("span"),R=g("button"),W=g("button"),K=g("button"),L=g("button"),C=g("button"),D=g("button"),S=g("button"),M=g("button"),G=g("button"),A=da(a,b.postId),F=g("div"),T=g("a"),Z=g("a"),aa=g("div");if("root"!==b.parentId){aa.classList.add("has-reply");aa.innerHTML='<svg width="12" height="12" viewBox="0 0 459 459"><path d="M459,216.75L280.5,38.25v102c-178.5,25.5-255,153-280.5,280.5C63.75,331.5,153,290.7,280.5,290.7v104.55L459,216.75z"/></svg>';
var U=I[b.parentId],H=Y[U.userId];Z.innerHTML=(null!=H.s1?'<img src="'+H.s1+'" onerror="this.onerror=null;this.src=\'//cdn.sofifa.com/pixel.gif\';" width="16" height="16">':"")+(null!=H.s2&&H.s1!=H.s2?'<img src="'+H.s2+'" onerror="this.onerror=null;this.src=\'//cdn.sofifa.com/pixel.gif\';" width="16" height="16">':"")+H.name;e(Z,"name");H.isModerator&&e(Z,"moderator-"+H.isModerator);Z.setAttribute("href","/user/"+U.userId)}v.id="comment-card-"+b.postId;p.id="comment-body-"+b.postId;w.id="comment-text-"+
b.postId;e(w,"text");n.id="comment-subtitle-"+b.postId;r.id="comment-timeago-"+b.postId;x.id="comment-score-"+b.postId;y.id="comment-options-"+b.postId;t.id="comment-edit-"+b.postId;u.id="comment-reply-"+b.postId;R.id="comment-collapse-"+b.postId;K.id="comment-flag-"+b.postId;L.id="comment-block-"+b.postId;C.id="comment-upvote-"+b.postId;D.id="comment-downvote-"+b.postId;S.id="comment-approve-"+b.postId;M.id="comment-remove-"+b.postId;G.id="comment-sticky-"+b.postId;A&&(A.id="comment-children-"+b.postId);
F.id="comment-contents-"+b.postId;T.id="comment-name-"+b.postId;R.title=COLLAPSE_REPLIES;R.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16"><path d="M13 7H3c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1z" fill-rule="evenodd"></path></svg>';W.title=COPY_URL;W.innerHTML='<svg width="20" height="20" viewBox="0 0 20 20"><path d="M14.18 5.82q1.719 0 2.93 1.23t1.211 2.949-1.211 2.949-2.93 1.23h-3.359v-1.602h3.359q1.055 0 1.816-0.762t0.762-1.816-0.762-1.816-1.816-0.762h-3.359v-1.602h3.359zM6.68 10.82v-1.641h6.641v1.641h-6.641zM3.242 10q0 1.055 0.762 1.816t1.816 0.762h3.359v1.602h-3.359q-1.719 0-2.93-1.23t-1.211-2.949 1.211-2.949 2.93-1.23h3.359v1.602h-3.359q-1.055 0-1.816 0.762t-0.762 1.816z"></path></svg>';
W.setAttribute("data-clipboard-text",window.location.href.split("?")[0]+"?root="+b.rootId+"&post="+b.postId+"#comment");K.title=REPORT;K.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M2.99 2.99c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1s1-.45 1-1v-11c0-.55-.45-1-1-1zm0-3c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm2 3.03v7.23c2.07-2.11 5.92 1.75 9 0V3.02c-3 2.07-6.94-2.03-9 0z" fill-rule="evenodd"></path></svg>';L.title=BLOCK;L.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M9.39 12.69c-1.2-.53-1.04-.85-1.08-1.29-.01-.07-.01-.13-.02-.2.41-.37.75-.87.97-1.44 0 0 .01-.03.01-.04.05-.13.09-.26.13-.39.27-.06.43-.36.5-.63.01-.03.03-.08.05-.12C8.18 7.8 6.94 6.04 6.94 4c0-.32.04-.62.09-.92-.17-.03-.35-.08-.51-.08-.65 0-1.37.2-1.88.59-.5.38-.87.92-1.05 1.51-.04.14-.07.27-.09.41-.09.48-.14 1.23-.14 1.74v.06c-.19.08-.36.27-.4.68-.03.31.1.59.16.7.06.28.23.59.51.64.04.14.08.27.13.39 0 .01.01.02.01.02v.01c.22.59.57 1.1.99 1.46 0 .06-.01.12-.01.17-.04.44.08.76-1.12 1.29-1.2.53-3.01 1.1-3.38 1.95C-.12 15.5.03 16 .03 16h12.96s.15-.5-.22-1.36c-.37-.85-2.18-1.42-3.38-1.95zM11.97 0C9.75 0 7.94 1.79 7.94 4s1.8 4 4.03 4S16 6.21 16 4s-1.8-4-4.03-4zM9.96 4c0-1.1.9-2 2.01-2 .37 0 .72.11 1.02.28l-2.75 2.73c-.17-.3-.28-.64-.28-1.01zm2.01 2c-.37 0-.72-.11-1.02-.28l2.75-2.73c.18.3.28.64.28 1.01.01 1.1-.9 2-2.01 2z" fill-rule="evenodd"></path></svg>';
C.title=UPVOTE;var N="",V=!1;"undefined"!==typeof d&&"undefined"!==typeof d.upVote&&(N+='<div class="popover-container"><div class="popover-arrow"></div><div class="bp3-callout">',d.upVote.forEach(function(a){N+='<a class="block" onclick="(function(e){window.open(\'/user/'+a.userId+"', '_blank');e.preventDefault();e.stopPropagation();})(event)\">";N+='<div class="comment-avatar">'+("undefined"===a.avatar||null==a.avatar?"":'<img src="'+a.avatar+'" onerror="this.onerror=null;this.src=\'//cdn.sofifa.com/pixel.gif\';">')+
a.name[0].toUpperCase()+"</div>";N+=a.name+"</a>";a.userId==ba&&(V=!0)}),N+="</div></div>",N=IS_MOBILE?"":N);C.innerHTML='<span id="upvote-'+b.postId+'">'+("undefined"!==typeof d&&"undefined"!==typeof d.upVote?d.upVote.length:"")+'</span> <svg width="16" height="16" viewBox="0 0 16 16"><path d="M12.71 9.29l-4-4C8.53 5.11 8.28 5 8 5s-.53.11-.71.29l-4 4a1.003 1.003 0 0 0 1.42 1.42L8 7.41l3.29 3.29c.18.19.43.3.71.3a1.003 1.003 0 0 0 .71-1.71z" fill-rule="evenodd"></path></svg>'+N;D.title=DOWNVOTE;var O=
"",X=!1;"undefined"!==typeof d&&"undefined"!==typeof d.downVote&&(O+='<div class="popover-container"><div class="popover-arrow"></div><div class="bp3-callout">',d.downVote.forEach(function(a){O+='<a class="block" onclick="(function(e){window.open(\'/user/'+a.userId+"', '_blank');e.preventDefault();e.stopPropagation();})(event)\">";O+='<div class="comment-avatar">'+("undefined"===a.avatar||null==a.avatar?"":'<img src="'+a.avatar+'" onerror="this.onerror=null;this.src=\'//cdn.sofifa.com/pixel.gif\';">')+
a.name[0].toUpperCase()+"</div>";O+=a.name+"</a>";a.userId==ba&&(X=!0)}),O+="</div></div>",O=IS_MOBILE?"":O);D.innerHTML='<span id="downvote-'+b.postId+'">'+("undefined"!==typeof d&&"undefined"!==typeof d.downVote?d.downVote.length:"")+'</span> <svg width="16" height="16" viewBox="0 0 16 16"><path d="M12 5c-.28 0-.53.11-.71.29L8 8.59l-3.29-3.3a1.003 1.003 0 0 0-1.42 1.42l4 4c.18.18.43.29.71.29s.53-.11.71-.29l4-4A1.003 1.003 0 0 0 12 5z" fill-rule="evenodd"></path></svg>'+O;t.title=EDIT;t.innerHTML=
EDIT;u.title=REPLY;u.innerHTML=REPLY;E.innerHTML=b.ip;S.title=APPROVE;S.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M8 16c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm4-11c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 0 0-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0 0 12 5z" fill-rule="evenodd"></path></svg>';M.title=REMOVE;M.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z" fill-rule="evenodd"></path></svg>';
B===b.postId?(G.title=ca?"Unsticky":"This comment has been stickied",G.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M8 0l2.5 5.3 5.5.8-4 4.1.9 5.8L8 13.3 3.1 16l.9-5.8-4-4.1 5.5-.8z" fill-rule="evenodd"></path></svg>'):(G.title="Sticky",G.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M16 6.11l-5.53-.84L8 0 5.53 5.27 0 6.11l4 4.1L3.06 16 8 13.27 12.94 16 12 10.21l4-4.1zM4.91 13.2l.59-3.62L3 7.02l3.45-.53L8 3.2l1.55 3.29 3.45.53-2.5 2.56.59 3.62L8 11.49 4.91 13.2z" fill-rule="evenodd"></path></svg>');
r.title=b.createdAt.toString();T.innerHTML=(null!=l.s1?'<img src="'+l.s1+'" onerror="this.onerror=null;this.src=\'//cdn.sofifa.com/pixel.gif\';" width="16" height="16">':"")+(null!=l.s2&&l.s1!=l.s2?'<img src="'+l.s2+'" onerror="this.onerror=null;this.src=\'//cdn.sofifa.com/pixel.gif\';" width="16" height="16">':"")+l.name;w.innerHTML=b.html;r.innerHTML=ya(f,b.createdAt);x.innerText=Q(b.score);h.innerHTML=("undefined"===l.avatar||null==l.avatar?"":'<img src="'+l.avatar+'" onerror="this.onerror=null;this.src=\'//cdn.sofifa.com/pixel.gif\';">')+
l.name[0].toUpperCase();e(h,"avatar");e(v,"card");ca&&"approved"!==b.state&&e(v,"dark-card");l.isModerator&&e(T,"moderator-"+l.isModerator);"flagged"===b.state&&e(T,"flagged");e(m,"header");e(T,"name");e(n,"subtitle");e(r,"timeago");e(x,"score");e(p,"body");e(y,"options");e(z,"operations");e(t,"option-button");e(t,"option-edit");e(E,"option-button");e(u,"option-button");e(u,"option-reply");e(R,"option-button");e(R,"option-collapse");e(W,"option-button");e(W,"option-copy");e(K,"option-button");e(K,
"option-flag");e(L,"option-button");e(L,"option-block");e(C,"option-button");e(C,"option-upvote");V&&e(C,"upvoted");e(D,"option-button");e(D,"option-downvote");X&&e(D,"downvoted");C.classList.add("popover");C.classList.add("popover-right");D.classList.add("popover");D.classList.add("popover-right");e(S,"option-button");e(S,"option-approve");e(M,"option-button");e(M,"option-remove");e(G,"option-button");B==b.postId?e(G,"option-unsticky"):e(G,"option-sticky");q(R,c.commentCollapse,b.postId);q(S,c.commentApprove,
b.postId);q(M,c.commentDelete,b.postId);q(G,c.commentSticky,b.postId);P?(q(C,c.upVote,b.postId),q(D,c.downVote,b.postId),q(K,c.commentFlag,b.postId),q(L,c.commenterBlock,[b.postId,b.userId])):(q(C,c.needSignIn),q(D,c.needSignIn),q(K,c.needSignIn),q(L,c.needSignIn));q(u,c.replyShow,b.postId);q(t,c.editShow,b.postId);T.setAttribute("href","/user/"+b.userId);y.appendChild(R);y.appendChild(W);z.appendChild(C);z.appendChild(D);z.appendChild(E);z.appendChild(u);ca?(z.appendChild(t),z.appendChild(M),"approved"!==
b.state&&z.appendChild(S)):ba==b.userId&&3600>get_time_diff(b.createdAt)?(z.appendChild(t),z.appendChild(M)):P&&(z.appendChild(K),z.appendChild(L));n.appendChild(x);n.appendChild(r);m.appendChild(y);m.appendChild(h);aa.prepend(T);aa.appendChild(Z);m.appendChild(aa);m.appendChild(n);1E3<b.html.length?(p.insertAdjacentHTML("beforeend",'<input type="checkbox" id="comment-check-'+b.postId+'" checked="checked" class="tabbed hide">'),p.appendChild(w),p.insertAdjacentHTML("beforeend",'<div class="content-more"><div class="gradient"></div><label for="comment-check-'+
b.postId+'" class="bp3-button bp3-fill fill pure-button text-left">\u21f2 '+SHOW_FULL_COMMENT+"</label></div>")):p.appendChild(w);p.appendChild(z);F.appendChild(p);A&&(e(A,"body"),F.appendChild(A));POST_ID==b.postId&&e(v,"highlighted-card");v.appendChild(m);v.appendChild(F);k.appendChild(v)});return k}function oa(a){var b={},c=f("comments-area"),e;for(e in I){var k=I[e];var d=k.parentId;d in b||(b[d]=[]);k.createdAt=new Date(k.createdAt);b[d].push(k)}if(b=da(b,"root")){if(a)return b;c.appendChild(b)}}
function za(a){if(P){var b=h.getElementsByClassName("comment-submit-button");Array.prototype.forEach.call(b,function(a){a.innerHTML=SAVING;a.disabled=!0});c.commentNew(a,function(){var a=h.getElementsByClassName("comment-submit-button");Array.prototype.forEach.call(a,function(a){a.innerHTML=POST;a.disabled=!1});"function"===typeof commentCallback&&commentCallback()})}else c.needSignIn()}function va(a){var b=f("textarea-"+a);""===b.value?e(b,"red-border"):(m(b,"red-border"),za(a))}function Aa(a){if(P){var b=
h.getElementsByClassName("comment-submit-button");Array.prototype.forEach.call(b,function(a){a.innerHTML=SAVING;a.disabled=!0});c.commentUpdate(a,function(){var a=h.getElementsByClassName("comment-submit-button");Array.prototype.forEach.call(a,function(a){a.innerHTML=POST;a.disabled=!1});"function"===typeof commentCallback&&commentCallback()})}else c.needSignIn()}function Ba(a){var b=f("textarea-"+a);""===b.value?e(b,"red-border"):(m(b,"red-border"),Aa(a))}function Ca(a){r("/api/thread/update",{domain:parent.location.host,
path:IDENTIFIER,attributes:{isLocked:ja,stickyPostId:B}},function(b){b.success?w(a):Zepto.alert(b.message)})}function Da(){var a=g("div");a.id="main-area";e(a,"main-area");a.setAttribute("style","display: none");u.appendChild(a)}function Ea(){for(var a=h.getElementsByTagName("script"),b=0;b<a.length;b++)a[b].src.match(/\/js\/comment\.min\.js$/)&&(X=U(a[b],"data-auto-init"),F=U(a[b],"data-id-root"),void 0===F&&(F="comment"),U(a[b],"data-no-fonts"))}function ta(a){POST_ID=ROOT_ID=0;f("more").innerHTML=
'<div class="bp3-spinner"><div class="bp3-spinner-animation"><svg width="20" height="20" stroke-width="16.00" viewBox="-3.00 -3.00 106.00 106.00"><path class="bp3-spinner-track" d="M 50,50 m 0,-45 a 45,45 0 1 1 0,90 a 45,45 0 1 1 0,-90"></path><path class="bp3-spinner-head" d="M 50,50 m 0,-45 a 45,45 0 1 1 0,90 a 45,45 0 1 1 0,-90" pathLength="280" stroke-dasharray="280 280" stroke-dashoffset="210"></path></svg></div></div>';u=f(F);null===u?f("more").innerHTML=LOAD_MORE_COMMENTS:fa(function(){ia(function(){var b=
oa(!0);w(a);f("more").replaceWith(b);b=ha();f("comments-area").appendChild(b);"function"===typeof commentCallback&&commentCallback()})})}function pa(){qa||(qa=!0,Ea(),"true"!==X&&void 0!==X||c.main(function(){p(h.getElementById("bp3-spinner"))}))}var F="comment",u=null,X,P=!1,I={},Y={},ka={},ca=!1,ja=!1,B="none",y={},t={},ba=void 0,V=1E12,x=-1<["time","best","my"].indexOf(ea("commentOrder"))?ea("commentOrder"):"time";c.commentNew=function(a,b){var c=f("textarea-super-container-"+a),g=f("textarea-"+
a),k=g.value;""===k?e(g,"red-border"):(m(g,"red-border"),localStorage&&localStorage.setItem("textarea-"+a,k),r("/api/comment/new",{domain:parent.location.host,path:IDENTIFIER,parentId:a,markdown:k},function(d){if(d.success){localStorage.removeItem("textarea-"+a);I[d.postId]={postId:d.postId,userId:d.userId,markdown:k,html:d.html,ip:d.ip,parentId:"root",score:0,state:"approved",direction:0,createdAt:new Date};Y[d.userId]={userId:d.userId,name:d.name,s1:d.s1,s2:d.s2,avatar:d.avatar,isModerator:!1};
var l=da({root:[{postId:d.postId,userId:d.userId,markdown:k,html:d.html,ip:d.ip,parentId:"root",score:0,state:"approved",direction:0,createdAt:new Date}]},"root");"root"!==a?(p(c),n(f("comment-body-"+a),l),y[a]=!1,t[a]=!1):(g.value="",c.parentNode.insertBefore(l,c.nextSibling));w(b)}else Zepto.alert(d.message,function(){"undefined"!=typeof d.redirect&&(window.location.href=d.redirect)}),l=h.getElementsByClassName("comment-submit-button"),Array.prototype.forEach.call(l,function(a){a.innerHTML=POST;
a.disabled=!1})}))};c.commentUpdate=function(a,b){var c=f("comment-card-"+a),g=f("textarea-"+a),k=g.value;""===k?e(g,"red-border"):(m(g,"red-border"),localStorage&&localStorage.setItem("textarea-"+a,k),r("/api/comment/update",{domain:parent.location.host,path:IDENTIFIER,postId:a,markdown:k},function(d){d.success?(localStorage.removeItem("textarea-"+a),I[a]={postId:d.postId,userId:d.userId,markdown:k,html:d.html,ip:d.ip,parentId:"root",score:0,state:"approved",direction:0,createdAt:new Date},d=da({root:[{postId:d.postId,
userId:d.userId,markdown:k,html:d.html,ip:d.ip,parentId:"root",score:0,state:"approved",direction:0,createdAt:new Date}]},"root"),c.replaceWith(d),y[a]=!1,t[a]=!1,w(b)):(Zepto.alert(d.message),d=h.getElementsByClassName("comment-submit-button"),Array.prototype.forEach.call(d,function(a){a.innerHTML=POST;a.disabled=!1}))}))};c.commentApprove=function(a){r("/api/comment/approve",{postId:a},function(b){if(b.success){b=f("comment-card-"+a);var c=f("comment-name-"+a),e=f("comment-approve-"+a);m(b,"dark-card");
m(c,"flagged");p(e)}else Zepto.alert(b.message)})};c.commentDelete=function(a){Zepto.confirm(DELETE_CONFIRM,function(b){b&&r("/api/comment/delete",{postId:a},function(b){b.success?(b=f("comment-card-"+a),p(b)):Zepto.alert(b.message)})})};c.upVote=function(a){var b=f("comment-upvote-"+a),c=f("comment-downvote-"+a),g=f("comment-score-"+a),k=f("upvote-"+a),d=f("downvote-"+a);r("/api/comment/vote",{postId:a,direction:1},function(a){if(a.success)switch(a.message){case "reset":m(b,"upvoted");m(c,"downvoted");
g.innerText=Q(parseInt(g.innerText.replace(/[^\d-.]/g,""))-1);a=1*k.innerText.replace(/[^\d-.]/g,"")-1;k.innerText=0<a?a:"";break;case "upvoted":m(b,"upvoted");m(c,"downvoted");e(b,"upvoted");g.innerText=Q(parseInt(g.innerText.replace(/[^\d-.]/g,""))+1);a=1*k.innerText.replace(/[^\d-.]/g,"")+1;k.innerText=0<a?a:"";break;case "reupvoted":m(b,"upvoted"),m(c,"downvoted"),e(b,"upvoted"),g.innerText=Q(parseInt(g.innerText.replace(/[^\d-.]/g,""))+2),a=1*k.innerText.replace(/[^\d-.]/g,"")+1,k.innerText=
0<a?a:"",a=1*d.innerText.replace(/[^\d-.]/g,"")-1,d.innerText=0<a?a:""}else Zepto.alert(a.message)})};c.downVote=function(a){var b=f("comment-upvote-"+a),c=f("comment-downvote-"+a),g=f("comment-score-"+a),k=f("upvote-"+a),d=f("downvote-"+a);r("/api/comment/vote",{postId:a,direction:-1},function(a){if(a.success)switch(a.message){case "reset":m(b,"upvoted");m(c,"downvoted");g.innerText=Q(parseInt(g.innerText.replace(/[^\d-.]/g,""))+1);a=1*d.innerText.replace(/[^\d-.]/g,"")-1;d.innerText=0<a?a:"";break;
case "downvoted":m(b,"upvoted");m(c,"downvoted");e(c,"downvoted");g.innerText=Q(parseInt(g.innerText.replace(/[^\d-.]/g,""))-1);a=1*d.innerText.replace(/[^\d-.]/g,"")+1;d.innerText=0<a?a:"";break;case "redownvoted":m(b,"upvoted"),m(c,"downvoted"),e(c,"downvoted"),g.innerText=Q(parseInt(g.innerText.replace(/[^\d-.]/g,""))-2),a=1*d.innerText.replace(/[^\d-.]/g,"")+1,d.innerText=0<a?a:"",a=1*k.innerText.replace(/[^\d-.]/g,"")-1,k.innerText=0<a?a:""}else Zepto.alert(a.message)})};c.replyShow=function(a){a in
t&&t[a]&&c.editCollapse(a);if(!(a in y&&y[a])){var b=f("comment-text-"+a),e=ma(a);b.parentNode.insertBefore(e,b.nextSibling);y[a]=!0;b=f("comment-reply-"+a);b.title=CANCEL_REPLY;b=E(b);q(b,c.replyCollapse,a)}};c.replyCollapse=function(a){var b=f("comment-reply-"+a),e=f("textarea-super-container-"+a);p(e);y[a]=!1;b.title=REPLY_TO_THIS_COMMENT;b=E(b);q(b,c.replyShow,a)};c.editShow=function(a){a in y&&y[a]&&c.replyCollapse(a);if(!(a in t&&t[a])){var b=f("comment-text-"+a),l=g("div"),h=g("div"),k=g("textarea"),
d=g("div"),m=g("input"),n=g("label"),p=g("button");g("a");l.id="textarea-super-container-"+a;h.id="textarea-container-"+a;k.id="textarea-"+a;m.id="attachment-"+a;n.id="attachment-button-"+a;p.id="submit-button-"+a;h.classList.add("form");k.classList.add("bp3-input");e(h,"textarea-container");m.name="attachment";m.type="file";m.classList.add("hide");m.setAttribute("accept","image/jpeg, image/jpg, image/webp, image/gif, image/png");e(n,"attachment");n.setAttribute("for","attachment-"+a);n.classList.add("bp3-button");
n.classList.add("bp3-minimal");n.classList.add("pure-button");n.innerHTML=CHOOSE_FILE;e(p,"button");p.classList.add("bp3-button");p.classList.add("bp3-minimal");p.classList.add("pure-button");p.classList.add("text-center");e(p,"submit-button");e(l,"button-margin");e(d,"toolbar");var r="";localStorage&&(r=localStorage.getItem("textarea-"+a));k.innerHTML=r?r:I[a].markdown;p.innerText="Post";k.style.height=Math.min(Math.max(k.scrollHeight,75),400)+30+"px";k.oninput=la(k);P?A(m,na,a):A(m,c.needSignIn);
q(p,Ba,a);d.appendChild(n);d.appendChild(m);d.appendChild(p);h.appendChild(k);h.appendChild(d);l.appendChild(h);b.parentNode.insertBefore(l,b.nextSibling);t[a]=!0;b=f("comment-edit-"+a);b.title=CANCEL_EDIT;b=E(b);q(b,c.editCollapse,a)}};c.editCollapse=function(a){var b=f("comment-edit-"+a),e=f("textarea-super-container-"+a);p(e);t[a]=!1;b.title=EDIT_THIS_COMMENT;b=E(b);q(b,c.editShow,a)};c.commentCollapse=function(a){var b=f("comment-contents-"+a),l=f("comment-collapse-"+a);b&&e(b,"hidden");m(l,"option-collapse");
e(l,"option-uncollapse");l.title=EXPAND_REPLIES;l.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16"><path d="M13 7H9V3c0-.55-.45-1-1-1s-1 .45-1 1v4H3c-.55 0-1 .45-1 1s.45 1 1 1h4v4c0 .55.45 1 1 1s1-.45 1-1V9h4c.55 0 1-.45 1-1s-.45-1-1-1z" fill-rule="evenodd"></path></svg>';l=E(l);q(l,c.commentUncollapse,a)};c.commentFlag=function(a){Zepto.confirm('<div class="pure-form"><div class="bp3-select half-spacing"><select id="flag-reason"><option value="">'+PLEASE_CHOOSE_A_REASON+'</option><option value="racism">'+
RACISM+'</option><option value="insult">'+INSULT+'</option><option value="spam">'+SPAMMING+'</option><option value="porn">'+PORN+'</option><option value="private">'+PRIVATE_INFO+'</option><option value="other">'+OTHER+'</option></select></div><div class="half-spacing"><textarea class="bp3-input" id="flag-description" placeholder="'+DESCRIPTION_OPTIONAL+'" onkeyup="javascript:this.style.height=\'\';this.style.height=Math.min(this.scrollHeight, 800) + 10 + \'px\';" spellcheck="false"></textarea></div></div>',
function(b){b&&(b={postId:a,reason:f("flag-reason").value,description:f("flag-description").value},r("/api/comment/flag",b,function(a){Zepto.alert(a.message)}))})};c.commenterBlock=function(a){Zepto.confirm(BLOCK_CONFIRM,function(b){b&&r("/api/user/block",{id:a[1]},function(b){Zepto.alert(b.message);b.success&&(b=f("comment-card-"+a[0]),p(b))})})};c.commentUncollapse=function(a){var b=f("comment-contents-"+a),g=f("comment-collapse-"+a);b&&m(b,"hidden");m(g,"option-uncollapse");e(g,"option-collapse");
g.title=COLLAPSE_REPLIES;g.innerHTML='<svg width="16" height="16" viewBox="0 0 16 16"><path d="M13 7H3c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1z" fill-rule="evenodd"></path></svg>';g=E(g);q(g,c.commentCollapse,a)};c.commentSticky=function(a){if("none"!==B){var b=f("comment-sticky-"+B);m(b,"option-unsticky");e(b,"option-sticky")}B=B===a?"none":a;Ca(function(){var b=f("comment-sticky-"+a);B===a?(m(b,"option-sticky"),e(b,"option-unsticky"),b.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M8 0l2.5 5.3 5.5.8-4 4.1.9 5.8L8 13.3 3.1 16l.9-5.8-4-4.1 5.5-.8z" fill-rule="evenodd"></path></svg>'):
(m(b,"option-unsticky"),e(b,"option-sticky"),b.innerHTML='<svg width="14" height="14" viewBox="0 0 16 16"><path d="M16 6.11l-5.53-.84L8 0 5.53 5.27 0 6.11l4 4.1L3.06 16 8 13.27 12.94 16 12 10.21l4-4.1zM4.91 13.2l.59-3.62L3 7.02l3.45-.53L8 3.2l1.55 3.29 3.45.53-2.5 2.56.59 3.62L8 11.49 4.91 13.2z" fill-rule="evenodd"></path></svg>')})};c.allShow=function(){var a=f("main-area"),b=f("logged-container");a.setAttribute("style","");b&&b.setAttribute("style","")};c.needSignIn=function(){signIn()};c.main=
function(a){u=f(F);if(null!==u){e(u,"root");Da();var b=ha();fa(function(){ia(function(){wa(function(){oa(!1);9<Object.keys(I).length&&f("comments-area").appendChild(b);"function"===typeof commentCallback&&commentCallback();c.allShow();w(a)})})})}};var qa=!1,ra=function(){var a=h.readyState;"loading"===a?h.addEventListener("readystatechange",ra):"interactive"===a?pa():"complete"===a&&pa()};ra()})(window.comment,document);
